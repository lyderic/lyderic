<!doctype html><html lang=fr-FR dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Windows on ArchLinux | De Mundis Lyderici</title><link rel=stylesheet href=/css/normalize.css><link rel=stylesheet href=https://unpkg.com/sakura.css/css/sakura.css media=screen><link rel=stylesheet href=https://unpkg.com/sakura.css/css/sakura-dark.css media="screen and (prefers-color-scheme: dark)"><link rel=stylesheet href=/css/custom.min.css></head><body><header><nav><div><a href=/>De Mundis Lyderici</a></div><div>|
<a href=/blog/observations/>Observations</a> |
<a href=/blog/technology/>Technology</a> |
<a href=/livres/>Mes livres</a> |</div></nav><hr></header><main><h3>Windows on ArchLinux</h3><div style=text-align:right;font-style:italic><time datetime=2025-02-15T08:19:35+01:00>15 février 2025</time></div><hr><div style=text-align:justify;margin-top:2em><p>This is not a full installation tutorial, rather a memo to remind me how I managed to get a decent running Windows 11 on my ArchLinux installation.</p><h3 id=check-virtualization-is-enabled-in-bios>Check virtualization is enabled in BIOS</h3><pre><code>lscpu | grep -i virtualization
</code></pre><h3 id=hypervisor-qemukvm-with-libvirt>Hypervisor: Qemu/KVM with libvirt</h3><p>I used to use VirtualBox and I liked it a lot, because it&rsquo;s super easy. However the performance is not optimal, I don&rsquo;t like that it&rsquo;s not Linux Kernel native, and the command line is barely usable. I am already using Qemu/KVM with incus at a basic level, so I decided to do the jump to libvirt. It&rsquo;s a little bit complicated than VirtualBox, but it&rsquo;s manageable if you have the time to understand the bits and pieces.</p><h1 id=overview>Overview</h1><p>In libvirt a <em>domain</em> is a virtual machine. Domains are Qemu machines emulated by KVM (when/if possible, which is all the time on a modern AMD64 architecture).</p><p>libvirt is a daemon that &ldquo;connects&rdquo; to qemu. There are two modes: <em>system</em> and <em>session</em>. Forget <em>session</em>, use <em>system</em>.</p><p>All the configuration is done by XML.</p><h1 id=archlinux-packages>ArchLinux Packages</h1><ul><li>qemu-full</li><li>libvirt</li><li>virt-install</li><li>virt-manager</li><li>virt-viewer</li><li>qemu-audio-spice</li></ul><h1 id=configuration>Configuration</h1><p><strong>I added myself to the <code>libvirt</code> and <code>wheel</code> group</strong></p><pre tabindex=0><code>$ sudo usermod -aG libvirt,wheel lyderic
</code></pre><p><strong>I changed a config file</strong></p><p>In <code>/etc/libvirtd/qemu.conf</code>, I added:</p><pre tabindex=0><code>user = &#34;lyderic&#34;
group = &#34;lyderic&#34;
</code></pre><p><strong>I created a btrfs subvolume for libvirt</strong></p><pre tabindex=0><code>$ sudo btrfs subvolume create /libvirt
$ sudo chown -v lyderic: /libvirt
$ ln -s /libvirt /home/lyderic/libvirt
</code></pre><h1 id=systemd>Systemd</h1><p>I didn&rsquo;t enable or start nothing. When I want to use the hypervisor, I do:</p><pre tabindex=0><code>$ sudo systemctl start libvirtd.service
</code></pre><h1 id=windows-11-installation>Windows 11 Installation</h1><p>I found <a href="https://www.youtube.com/watch?v=wxxP39cNJOs">this video</a> very helpful.</p><p>It explains how to get virtio installed on Windows. Get as much virtio devices as possible (disk, network, video&mldr;). Once the drivers are installed in Windows, you get stellar performance.</p><p>The web site where virtio ISOs can be <a href=https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/archive-virtio/>found here</a>.</p></div></main><footer><p style=font-size:small;font-style:italic;text-align:right>&copy; Lydéric Landry, Luxembourg 2025
<script src=/js/main.js></script></footer></body></html>